[Unit]
Description={{ service_identifier }}

[Service]
User={{ service_identifier }}
Group={{ service_identifier }}
WorkingDirectory={{ vald_home_dir }}
EnvironmentFile={{ vald_environment_secrets_file_path }}
ExecStart=/usr/bin/sh -c 'echo $KEYRING_PASSWORD | {{ vald_bin_dir }}/{{ service_identifier }} vald-start \
    --home {{ vald_home_dir }} \
    --chain-id {{ vald_chain_id[env] }} \
    --validator-addr {{ vald_validator_address[env] }} \
    --log_level debug --from broadcaster'
Restart=always
RestartSec=4
LimitNOFILE=65536
MemoryLimit=64G
StandardOutput=append:{{ vald_log_file_path }}
StandardError=inherit

[Install]
WantedBy=multi-user.target